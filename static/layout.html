<!doctype html>
<html lang="en" ng-app="grano">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>grano</title>
  <meta name="description" content="A web-based framework for the storage, analysis and presentation of social network information.">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>

  {% assets filters="less,cssmin,cssrewrite", output="prod/ui.style.css",
      "ui/style/local.less",
      "ui/vendor/angular-datepicker/dist/index.css",
      "ui/style/style.less" %}
    <link type="text/css" href="{{ ASSET_URL }}" rel="stylesheet">
  {% endassets %}

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="shortcut icon" href="http://assets.pudo.org/img/favicon.ico" type="image/x-icon" />
</head>
<body ng-controller="AppCtrl" class="grano" ng-show="pageLoaded">
  {% raw %}
  <div id="page">
    <nav class="navbar navbar-default" role="navigation" id="menu">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="appName" class="navbar-brand" href="#/">{{config.APP_NAME}}</a>
      </div>

      <div class="collapse navbar-collapse navbar-ex1-collapse navbar-right">
        <div class="visible-xs visible-sm">
          <gn-menu project="project" nav-section="navSection"
                ul-class="nav navbar-nav" full="false"></gn-menu>
        </div>
        <ul class="nav navbar-nav">
          <li ng-show="session.logged_in">
            <a ng-click="showAccount()"><i class="fa fa-cogs"></i> Profile</a>
          </li>
          <li ng-show="session.oauth.github && !session.logged_in" ng-hide="session.logged_in">
            <a href="{{session.oauth.github}}?next_url={{config.UI_ROOT}}"><i class="fa fa-github"></i> Sign in via GitHub</a>
          </li>
          <li ng-show="session.oauth.twitter && !session.logged_in">
            <a href="{{session.oauth.twitter}}?next_url={{config.UI_ROOT}}"><i class="fa fa-twitter"></i> Sign in via Twitter</a>
          </li>
          <li ng-show="session.oauth.facebook && !session.logged_in">
            <a href="{{session.oauth.facebook}}?next_url={{config.UI_ROOT}}"><i class="fa fa-facebook"></i> Sign in via Facebook</a>
          </li>
          <li ng-show="session.logged_in">
            <a href="{{config.API_ROOT}}/sessions/logout?next_url={{config.UI_ROOT}}"><i class="fa fa-sign-out"></i> Sign Out</a>
          </li>
        </ul>
      </div>
    </nav>

    <div id="airlock" class="container-fluid">
      <div class="row breadcrumbs hidden-xs hidden-sm">
          <div class="col-md-2">
              <span class="back-button" ng-show="project">
                  <i class="fa fa-chevron-circle-left"></i> <a href="#/">{{project.slug}}</a>
              </span>
          </div>
          <div class="col-md-10">
              <strong ng-hide="project">Welcome to {{config.APP_NAME}}</strong>
              <span ng-show="project">
                  <span class="fact-block">
                      Project name: <strong>{{project.label}}</strong>
                  </span>
                  <span class="fact-block">
                      Entities: <strong>{{project.entities_count}}</strong>
                  </span>
                  <span class="fact-block">
                      Relations: <strong>{{project.relations_count}}</strong>
                  </span>
              </span>
          </div>
      </div>

      <div class="row">
          <div class="col-md-10 col-md-push-2" ng-view>
          </div>
          <div class="clearfix visible-xs visible-sm"><hr></div>
          <div class="col-md-2 col-md-pull-10 hidden-xs hidden-sm">
              <gn-menu project="project" nav-section="navSection"
                ul-class="nav nav-pills nav-stacked" full="true"></gn-menu>
          </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <div class="row">
        <div class="span-12 inner">
          <strong>grano</strong>: facebook, for terrorists
          &middot;
          {{config.APP_VERSION}}
          &middot;
          <a href="https://github.com/pudo/grano">source code</a>
          &middot;
          <a href="https://docs.grano.cc">documentation</a>
        </div>
      </div>
    </div>
  </footer>
  {% endraw %}

  {% for path, tmpl in angular_templates %}
    <script id="{{path}}" type="text/ng-template">{{tmpl|safe}}</script>
  {% endfor %}

  {% assets filters="uglifyjs", output="prod/ui.vendor.js",
        "ui/vendor/ng-file-upload/angular-file-upload-shim.js",
        "ui/vendor/jquery/dist/jquery.js",
        "ui/vendor/bootstrap/js/collapse.js",
        "ui/vendor/moment/moment.js",
        "ui/vendor/underscore/underscore.js",   
        "ui/vendor/angular/angular.js",
        "ui/vendor/angular-bootstrap/ui-bootstrap-tpls.js",
        "ui/vendor/angular-route/angular-route.js",
        "ui/vendor/angular-sanitize/angular-sanitize.js",
        "ui/vendor/angular-animate/angular-animate.js",
        "ui/vendor/ng-file-upload/angular-file-upload.js"
         %}
      <script type="text/javascript" src="{{ ASSET_URL }}"></script>
  {% endassets %}
  <!--script type="text/javascript" src="{{url_for('ui.config')}}"></script-->
  <script type="text/javascript" src="config.js"></script>
  {% assets filters="jsmin", output="prod/ui.app.js",
        "ui/js/app.js",
        "ui/js/validation.js",
        "ui/js/services/core.js",
        "ui/js/services/session.js",
        "ui/js/services/schemata.js",
        "ui/js/filters/truncate.js",
        "ui/js/filters/datetime.js",
        "ui/js/directives/permission.js",
        "ui/js/directives/pager.js",
        "ui/js/directives/menu.js",
        "ui/js/directives/property_view.js",
        "ui/js/directives/property_edit.js",
        "ui/js/directives/property_multiedit.js",
        "ui/js/directives/property_list.js",
        "ui/js/directives/relation_list.js",
        "ui/js/directives/entity_preview.js",
        "ui/js/directives/entity_suggest.js",
        "ui/js/directives/entity_header.js",
        "ui/js/controllers/app.js",
        "ui/js/controllers/home.js",
        "ui/js/controllers/accounts.js",
        "ui/js/controllers/projects.js",
        "ui/js/controllers/schemata.js",
        "ui/js/controllers/permissions.js",
        "ui/js/controllers/entities.js",
        "ui/js/controllers/relations.js",
        "ui/js/controllers/imports.js",
        "ui/js/controllers/properties.js"
         %}
      <script type="text/javascript" src="{{ ASSET_URL }}"></script>
  {% endassets %}
</body>
</html>
